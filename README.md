# 🐳 WhaleBot 智能鲸鱼小车 (ESP32-S3 AI Robot)

**WhaleBot** 是一个基于 **ESP32-S3** 的全向移动 AI 机器人项目。它集成了 **Coze (扣子) 大模型**、**百度语音技术**、**麦克纳姆轮**全向运动控制以及**串口触摸屏**，实现了“听、说、想、动、看”一体化的智能交互体验。

---

### 🤝 Datawhale x 星芯工坊 | AI 硬件跟班学习

## 📚 开发教程 (Documentation)

本项目联合国内最大的 AI 开源社区 **Datawhale** 发起【AI 硬件入门跟班学习】活动！

Datawhale 致力于构建“For the learner, 构建 AI 学习者的开源社区”，汇聚了众多 AI 领域的专家与爱好者。

本次课程将带领大家从零开始，手搓一台属于自己的 AI 机器人。

我们编写了保姆级的开发教程，涵盖硬件选型、PCB 设计原理、代码逐行解析及组装教程，并且会在后续配上视频教程。

👉 DataWhale官网教程链接**https://www.datawhale.cn/learn/summary/268** 👈

👉DataWhale跟班学习群👈

<img width="400" height="400" alt="a497525bfc7f890d2fe31357c8119220" src="https://github.com/user-attachments/assets/a3c197dc-f527-4aca-8c82-df68392f9ef7" />

如果这一期跟班学习人数已满怎么办？没关系，你可以加入我们的项目交流微信群，同样可以得到技术和硬件支持！

<img width="396" height="396" alt="image" src="https://github.com/user-attachments/assets/99fd9e6a-3d8f-402e-8d46-a8bf989573f7" />

### 🛍️ 新手无忧套件

为了让初学者免去元器件采购发货慢、型号买错的烦恼，我们提供了**一站式全套件**（包含 3D 打印外壳、PCB 成品/半成品、电机、电池及所有电子料）。这些物料消息会在跟班学习官方群和我们的项目讨论群中同步更新，可以在群内咨询~

---

## 🔥 功能亮点 (Feature Highlights)

WhaleBot 不仅仅是一个遥控车，它是一个拥有“大脑”和“表情”的桌面 AI 宠物。

### 1. 🧠 接入 Coze 智能体大脑
*   **自定义人设**：通过 Coze 平台，你可以将小车定义为任何角色（如：傲娇的猫娘、博学的教授、超级飞侠乐迪）。
*   **大模型加持**：利用 LLM 的强大能力，支持上下文连续对话，不仅能闲聊，还能回答百科知识、讲故事。
*   **云端大脑**：所有思考在云端完成，ESP32 负责高效传输，降低本地算力压力。

### 2. 🗣️ 自然语音交互 (VAD)
*   **VAD 自动检测**：告别传统的“按下说话、松开结束”。WhaleBot 采用**语音活动检测 (Voice Activity Detection)** 技术，能自动判断你什么时候开始说话，什么时候说完。
*   **说话即录，说完即停**：像人与人交流一样自然，检测到静音自动发送请求。
*   **百度语音技术**：集成百度短语音识别 (STT) 和 在线语音合成 (TTS)，响应速度快，中文识别率高。

### 3. 🚗 麦轮全向运动控制
*   **全向移动**：搭载 4 个麦克纳姆轮和 N20 减速电机，无需转向即可实现**前后、左右平移、原地旋转**等 8 个自由度的运动。
*   **双重运动模式**：
    *   **点动模式**：发送指令后运动 2 秒自动停止，适合精准走位。
    *   **持续模式**：发送指令后持续运动，适合长距离巡航。
*   **状态机管理**：在“语音模式”和“运动模式”之间一键切换，互不干扰。

### 4. 🖥️ 情感化触屏交互
*   **表情包显示**：集成串口触摸屏，根据不同的状态显示不同的表情（开心、思考、听歌等），让机器人更有温度。
*   **触控操作**：除了语音和串口指令，你还可以直接在屏幕上点击按钮来控制小车运动或切换模式。

### 5. 🔋 工业级电源管理
*   **高效供电**：板载 TPS5430 工业级降压芯片，将 12V 电池电压高效转换为 5V，不仅发热低，还能为功放提供澎湃动力。
*   **干扰隔离**：针对音频电路做了专门的电源隔离设计，最大程度减少电机转动时对麦克风和喇叭的底噪干扰。

### 6. 图形化编程



## 🛠️ 硬件架构

### 硬件清单
*   **主控**：ESP32-S3-DevKitC (N16R8)
*   **驱动**：TB6612FNG x 2
*   **执行器**：N20 减速电机 (12V 300RPM) x 4 + 麦克纳姆轮
*   **音频**：INMP441 麦克风 + MAX98357A 功放
*   **电源**：12V 锂电池 + TPS5430 降压模块
*   **交互**：串口触摸屏 / 天问 ASRPRO (可选语音唤醒)

---

## 💻 软件快速开始

### 1. 环境配置
本项目基于 Arduino IDE 开发。
*   **开发板**：`ESP32S3 Dev Module`
*   **PSRAM**：**必须开启 `OPI PSRAM`** (工具 -> PSRAM -> OPI PSRAM)
*   **依赖库**：`ArduinoJson`, `UrlEncode`

### 2. 烧录步骤
1.  进入 `firmware/WhaleBot.ai_Main/` 目录。
2.  打开 `WhaleBot.ai_Main.ino`。
3.  在代码顶部填入你的 **WiFi 信息**、**百度 API Key** 和 **Coze Token**。
4.  连接电脑，选择端口，点击上传。

---

## 🤝 贡献与致谢

本项目由 **星芯工坊** 发起并维护。

*   感谢 **Datawhale** 社区的大力支持。
*   感谢 **Coze (扣子)** 提供的大模型 API 服务。
*   感谢 **Espressif** 提供的 ESP32 芯片与技术生态。

如果你觉得这个项目有趣，请点击右上角的 ⭐️ **Star** 支持我们！

## 📄 License

[MIT License](LICENSE) © 2024 StarChip Workshop (星芯工坊)
```
